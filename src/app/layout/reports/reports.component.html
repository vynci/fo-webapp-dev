<h3>Reports</h3><br>
<div class="row">
    <div class="col-sm-3">
        <form class="form-inline mb-4">
            <div class="form-group">
                <div class="input-group">
                    <label for="" style="margin-right: 5px;"><b>From:</b></label>
                    <button type="button" class="btn btn-outline-primary btn-block"  (click)="openDateFilterModal('From'); open(content)">{{formatDate(dateFilter.from)}}</button>
                </div>                

            </div>
        </form>
    </div>
    <div class="col-sm-3">
        <form class="form-inline mb-4">
            <div class="form-group">
                <div class="input-group">
                    <label for="" style="margin-right: 5px;"><b>To:</b></label>
                    <button type="button" class="btn btn-outline-primary btn-block"  (click)="openDateFilterModal('To'); open(content)">{{formatDate(dateFilter.to)}}</button>
                </div>   
            </div>
        </form>         
    </div>
    <div class="col-sm-3">
        <div class="form-group">
            <select class="form-control">
                <option value="" selected disabled>Choose Sensor</option>
                <option>Sensor A</option>
                <option>Sensor B</option>
            </select>
        </div>
    </div>        
    <div class="col-sm-3">
        <div class="form-group">
            <button type="button" class="btn btn-success btn-block" (click)="generateReport()">Generate</button>
        </div>             
    </div>        
</div>    
<br>

<div *ngIf="!isReportGenerated" class="row" style="margin-top: 250px;">
    <div class="col col-lg-12">
        <p style="text-align:center;">Empty Report. Click <b>Generate</b> button to create one.</p>
    </div>
</div>

<div *ngIf="isReportGenerated" class="row">
    <div class="col col-lg-12">
        <div class="card mb-3">
            <div class="card-header">
                <div class="row">
                    <div class="col col-sm-6">
                        Report for Sensor A
                    </div>
                    <div class="col col-sm-6" style="text-align:right;">
                        <!-- <button type="button" class="btn btn-sm btn-outline-danger">PDF</button> -->
                        <button type="button" (click)="downloadCSV()" class="btn btn-sm btn-outline-warning">CSV</button>
                    </div>
                </div>                
            </div>
            <div class="card-block table-responsive">
                <div>
                    <p *ngIf="sensorLogs == 0" style="text-align:center;">No Results Found. Please try again with other sensors or date range.</p>
                </div>
                <table *ngIf="sensorLogs != 0" class="table table-bordered table-hover table-striped">
                    <thead>
                    <tr>
                        <th>Date</th>
                        <th>Heading</th>
                        <th>Pitch</th>
                        <th>Roll</th>
                    </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let log of sensorLogs">
                            <td>{{formatDate(log.createdDate)}}</td>
                            <td>{{log.heading}}</td>
                            <td>{{log.pitch}}</td>
                            <td>{{log.roll}}</td>
                        </tr>                                                                                                       
                    </tbody>
                </table>
                <ngb-pagination *ngIf="sensorLogs != 0" [collectionSize]="collectionSize" [(page)]="currentPage" (pageChange)="onPageChange($event)" [pageSize]="tableRowLimit" [maxSize]="5" [rotate]="true" [boundaryLinks]="true"></ngb-pagination>
                <span>Total Results: <b>{{collectionSize || 0}}</b></span>
            </div>
        </div>        
    </div>
</div>

<!-- modal templates -->

<ng-template #content let-c="close" let-d="dismiss">
    <div class="modal-header">
        <h4 class="modal-title">{{dateFilterType}}</h4>
        <button type="button" class="close" aria-label="Close" (click)="d('Cross click')">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">
        <h5>Date</h5>
        <div class="input-group">
            <input class="form-control" placeholder="yyyy-mm-dd"
                name="dp" [(ngModel)]="dateModel" ngbDatepicker #d1="ngbDatepicker">
            <div class="input-group-addon" (click)="d1.toggle()" >
                <span class="fa fa-calendar"></span>
            </div>
        </div>
        <br>
        <h5>Time</h5>
        <ngb-timepicker [(ngModel)]="timeModel" [meridian]="meridian"></ngb-timepicker>
        
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-primary" (click)="applyDateFilter(); c('Close click')">Apply</button>
        <button type="button" class="btn btn-secondary" (click)="applyDateFilter(); c('Close click')">Cancel</button>
    </div>
</ng-template>


